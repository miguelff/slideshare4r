<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Slideshare::Builder</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Slideshare::Builder</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/slideshare/model_rb.html">
                lib/slideshare/model.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Classes that include this module, extend its eigenclass by adding +<a
href="Builder.html#M000002">from_xml</a>(xml_str)+ method, which builds a
new instance of the class extended by unmarshalling the XML document
provided.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000002">from_xml</a>&nbsp;&nbsp;
      <a href="#M000001">included</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000001" class="method-detail">
        <a name="M000001"></a>

        <div class="method-heading">
          <a href="#M000001" class="method-signature">
          <span class="method-name">included</span><span class="method-args">(base)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
When clases include this module, they extend they functionality with this
module&#8216;s instance methods
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000001-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000001-source">
<pre>
    <span class="ruby-comment cmt"># File lib/slideshare/model.rb, line 17</span>
17:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">included</span>(<span class="ruby-identifier">base</span>)
18:       <span class="ruby-identifier">base</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-keyword kw">self</span>)
19:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="#M000002" class="method-signature">
          <span class="method-name">from_xml</span><span class="method-args">(xml_doc)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Takes an XML document as a string or Nokogiri::XML::Element, and extracts
certain information from it adding new properties to the instance being
built on the fly.
</p>
<p>
The information to gather from the XML document is pointed by a dictionary
returned by self.extraction_rules method, which is defined in each of the
classes that include the module.
</p>
<p>
This dictionary contains the name of the instance property as the key, and
a list indicating how to extract it from the XML as the value. The latter
must have at least one first element, which is the XPATH expression that
points to the xml that encloses the value of the property. An optional
second parameter is a block that receives one paremeter (the XML node
pointed by the expression) and returns the information to set on the
property. If not provided, the block will get the inner text of the node.
</p>
<p>
As an example, imagine the following class:
</p>
<pre>
        class Slideshow
         include Builder

         def self.extraction_rules
           {
             :id=&gt;[&quot;Slideshow/ID&quot;],
             :title=&gt;[&quot;Slideshow/Title&quot;,lambda{|x| x.value.upcase}]
           }
         end
        end
</pre>
<p>
and the following xml document
</p>
<pre>
        xml_str=%q{
        &lt;Slideshow&gt;
         &lt;ID&gt;foo&lt;/ID&gt;
         &lt;Title&gt;bar/Title&gt;
        &lt;/Slideshow&gt;
        }
</pre>
<p>
if we make this call:
</p>
<pre>
        Slideshow.from_xml(xml_str)
</pre>
<p>
we will obtain something like
</p>
<pre>
        &lt;Slideshow:0x1014e11f8 @id=&quot;foo&quot;, @title=&quot;BAR&quot;&gt;
</pre>
<p>
this instance will also have accessor methods for both id, and title.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000002-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000002-source">
<pre>
    <span class="ruby-comment cmt"># File lib/slideshare/model.rb, line 72</span>
72:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_xml</span>(<span class="ruby-identifier">xml_doc</span>)
73:       <span class="ruby-identifier">instance</span>=<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>
74:       <span class="ruby-identifier">xml_doc</span>  = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-identifier">xml_doc</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">xml_doc</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>
75:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">extraction_rules</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span>,<span class="ruby-identifier">rule</span><span class="ruby-operator">|</span>
76:         <span class="ruby-identifier">path</span>=<span class="ruby-identifier">rule</span>[<span class="ruby-value">0</span>]
77:         <span class="ruby-identifier">extraction_predicate</span>=<span class="ruby-identifier">rule</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">lambda</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">text</span>}
78:         <span class="ruby-identifier">instance</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-node">&quot;@#{attribute}&quot;</span>,<span class="ruby-identifier">extraction_predicate</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">xml_doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-identifier">path</span>)))
79:         <span class="ruby-identifier">instance</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-node">&quot;def #{attribute}; @#{attribute}; end&quot;</span>
80:         <span class="ruby-identifier">instance</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-node">&quot;def #{attribute}=(value); @#{attribute}=value;end&quot;</span>
81:       <span class="ruby-keyword kw">end</span>
82:       <span class="ruby-identifier">instance</span>
83:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>